// Скриптовая часть, которая отвечает за логику. Здесь, в этом файле, обрабатываются все события,
// просчитываются выражения, выводится результат.



// Это функция, которая используется для добавления символов на дисплей. Она вызывается при нажатии кнопки,
// в неё передаётся цифра с этой кнопки. В функции ищется элемент с АйДи "display",
// у нас это главный экранчик. С него берётся значение и приписывается справа. Если на экране было 3,
// нажат был +, то станет 3+, если было 3 и нажата 2, то будет 32
function appendToDisplay(value) {
    document.getElementById('display').value += value;
}

// Это функция, которая очищает дисплей. По аналогии с прошлой функцией, берётся значение с экранчика
// и заменяется на "", то есть пустоту. Вызывается она только кнопкой С
function clearDisplay() {
    document.getElementById('display').value = '';
}

// Это функция, которая убирает прошлый символ.
function backspace() {
    let display = document.getElementById('display'); //Записываем в переменную текущее значение экранчика
    document.getElementById('display').value = display.value.slice(0, -1); // Делаем срез. Обрезаем выражение посимвольно,
    // от самого первого до предпоследнего. Достигается это с помощью массива. Например:
    // На калькуляторе было 3+2. Теперь это [3, +, 2]. -1 элемент это тот, который идёт перед 0,
    // то есть самым первым. Из-за того, что мы выходим за груницу, так как перед первым элементом, 3,
    // ничего нет, мы выходим как бы с конца и попадаем на 2. Итого имеем срез с первого элемента, 3,
    // по последний элемент, 2, НЕ ВКЛЮЧИТЕЛЬНО. Из-за этого мы по итогу имеем теперь [3, +].
    // То есть убрали последний символ
}

// Это функция, которая меняет выражение на отрицательное. Главная идея — мы оборачиваем всё,
// Что есть сейчас на экранчике, в скобки и умножаем на -1. В итоге всегда получим противоположные числа
function negative() {
    let currentValue = document.getElementById('display').value; // По аналогии с предыдущими функциями,
    // Берём значение с экранчика и записываем его в переменную

    // Проверяем, содержит ли дисплей текущее выражение. Если на экранчике что-то есть — считаем
    // всё выражение, предварительно умноженное на -1. За счёт отвечает eval
    if (currentValue !== '') {
        let result = eval(`(${currentValue}) * -1`);
        display.value = result.toString(); //Конвертируем результат в строку и выводим на экранчик
    } else {
        display.value = '-'; // Если на экранчике пусто, то просто поставится минус
    }
}



// Главная функция, отвечающая за счёт. Вызывается кнопкой =
function calculate() {
    let display = document.getElementById('display'); // Берём значение с экранчика
    let result;
    try { // Пробуем сделать всё ниже
        result = eval(display.value); // Результат равен вычислению всего выржаения с экранчика
        if (isNaN(result) || !isFinite(result)) { // Если что-то непонятное, выводим ошибку
            throw new Error('Неверное выражение');
        }
        display.value = result; // Выводим вычесленное выражение
    } catch (error) { // Если не получилось сделать вычисления выше:
        display.value = 'Ошибка'; // Выдаём ошибку
    }
}
